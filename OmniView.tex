\documentclass{scrreprt}
\usepackage{glossaries}
\usepackage{listings}
\usepackage[]{graphicx}

\newglossaryentry{latex}{
  name=LaTeX,
  description={Ein Textsatzsystem}
}
\newglossaryentry{consumer}{
    name=Consumer,
    description={A program using a UaDI conform DLL to get generated data from a producer or device}
}
\makeglossaries

\tableofcontents
\newpage 

\begin{document}

\chapter{The Idea of OmniView}
OmniView is planned to be an omniscient data-visualization and analysis tool. 
OmniView itself shouldn't need to know anything about any given data-producer at compile-time, but should still be able to visualize the produced information.
OmniView itself shouldn't need to know anything about any given analysis-tool at compile-time, but should still be able to use an analysis-API. 
In order for OmniView to work this way, there shall be a structured architectural approach, to enable modular development.
This includes dataproducer devices as well as analysis-tools.

\section[Modules]{Modules of OmniView and their Role}
The Name OmniView actually only applies to the executable instance, that is in charge of displaying gathered data in a way similar to PicoScope or sigrok, whether it's live or archived data. 
Since (well-designed) modularity can help keeping the complexity of a system in check, the greater OmniView-Architecture is a project of the Bochumer AI-Group.
\\
A oscilloscope-like user-interface is the most generic way, to display data as a function over time. 
All measurement-values are a sample of a certain unit (sometimes even an SI-Unit) at a specific point in time, and thus projectable onto a plane with its unit in y- and the time in x-dimension. 
Displaying a multitude of different y-dimensions in an oscillogram is a well-proven design and has been implemented in several data-recorder software-suites. 
\\
Incoming live-data into the view is delivered via a websocket connection.
There won't be hard real-time guarantees in this interface. 
This websocket is provided by an entity that implements the concept of an epoch-server.
Soft real-time can be guaranteed to a certain extend in the internal structure of the epoch-server and its storage-interface.
Due to the nature of live-updates of a GUI, new updates are being received on a regular basis and prepended to the n-1 dataset.
Each update-object that contains data to be prepended, and displayed in the oscillogram is called a column. 
It derives its name from the property, that it holds several values of different data-channels in parallel.
The aggregation to a continuous stream of such pieces of information that belong to one channel is called a waveform. 
\\
An epoch-server has the ability to maintain multiple websocket connections, and an OmniView-Instance has the ability to maintain connections to multiple epoch-servers. 
Before a view can instantiate a connection with a websocket, it queries the epoch-servers REST-API, to receive a structure know as possibility-list.
This list contains all available devices, and all available transducers. 
A transducer is a function that works as a filter.
It implements a directed node, taking one or more waveforms as an input and having exactly one waveform as an output. 
Using transducers, a so-called (processing-)route can be constructed. 
A route is a directed graph composed from transducer-nodes. 
For further investigation see \ref{chap:WaveformProcessingNetwork}.
The structure inside the epoch server that defines which channels are being send out to a specific connection is called the connections visibility-list. 
This list in combination with a checkbox will also be displayed in the view.

\begin{figure}
    \includegraphics[\width=.9]{assets/overview.pdf}
    \caption{Overview of Modules}
\end{figure}

\section[Greater Picture]{OmniView and its Role in the Greater Picture}
Auto-Intern GmbH and their connected entities have been working on a unified architecture for measurement- and monitoring-devices since the early 2000s. 
Integrating measurement-systems into larger architectures is by no means a trivial task.
OmniView fits into the Grand-Unified-Monitoring-Architecture of Auto-Intern.


\begin{figure}
    \includegraphics[width=.9\textwidth]{./assets/pictures/overview.pdf}
    \caption[]{Brief overview of the proposed structure}
    \label{fig:overview}
\end{figure}


There shall be a unified way to interact with an abstract data-producer.
This includes devices such as:
\begin{enumerate}
    \item a USB-oscilloscope \gls{latex}
    \item a TCP/IP client, sending a continuous stream
    \item a USB-logic-analyzer
    \item a random-number-generator
    \item a filedescriptor
\end{enumerate}

Since it is not known at compile-time, which devices will be used at runtime, the code can't be linked statically into OmniView (or any other data-\gls{consumer} for that matter). 
Therefor an interface shall be defined, that gets used by the consumer, but the implementation of the data-handling ought to be provided in a dynamically linked library. 
From here on forward we will refer to this as \lstinline|DLL| even though \lstinline|.dll| and \lstinline|.so| are meant equally. 
If a windows \lstinline|.dll| or a linux \lstinline|.so| is meant specifically, please use the terms \lstinline|.dll| or \lstinline|.so|, otherwise \lstinline|DLL|. 
Be aware, that this \lstinline|DLL| does not necessarily constitue an aquivalent to an actual device-driver with a communication-channel to the systems kernel.
\\
It appears, that all dataproducers that are relevant for OmniView can be abstracted in a certain way, and thus share the same function-calls in a \lstinline|DLL|.
There are three requirements:
\begin{itemize}
    \item Grabbing the next part of the data-stream asynchronusly
    \item The data-producer providing meta-information about itself 
    \item Send control-data from the consumer to the data-producer
\end{itemize}
This interprocess-communication comes with some additional hurdles.

\section{Memory Management Ideology}
Not only does OmniView not know about which devices will be connected at runtime, it also does neither know about the amount of devices that will be attached, nor does it know what data-rate the producers will provide.
Due to this uncertainties, a strongly structured memory allocation ideology needs to be implemented in order to minimize error-prone sections in the applications code.


\section[UaDI]{Unified abstract Data\-producer Interface}
The \textit{Unified abstract Data\-producer Interface} is the protocol that specifies the interprocess\-communication between the con\-sumer and the device, using the \lstinline|DLL|. 

\begin{figure}
    \includegraphics[width=.9\textwidth]{./assets/pictures/interface.pdf}
    \caption[]{Coarse structure of the DLL-interface}
    \label{fig:dllinterface}
\end{figure}

\section{OmniView Userinterface}

The OmniView user-interface is written in C++, in a later process this will be replaced by JS. The Interface should contain 

\begin{itemize}
    \item an adjustable window where the data is displayed
    \item a general menu for settings, help and others 
    \item a menu for all extra windows 
    \item a window to upload the data
    \item a window to save the data 
    \item a window to check the old data analyses results 
    \item an exit button
\end{itemize}

and look like the following picture. 

% insert picture 
The detailed descriptions of the individual elements can be found below.

\subsection{Datawindow}

The following parts of the view should be adjustable: 

\begin{itemize}
    \item screensize
    \item scale of the x- and y-axis 
    \item fontsize 
\end{itemize}

The adjustments should be able to be made per mouse, mousepad, touchpad and with shortcuts. They also should be able to be set to a specific number. 
The user should be able to zoom in the dataset and cut out a specific part of the data. The image of the data should be able to be converted into a PDF. 

\subsection{Data upload window}

The upload window should be an extra window that does not overlap with the datawindow. It should contain an upload button and an exit button. The user should be able to put in the 
current dataset or another dataset from their database. 
The window should contain fields where the user can put in 
\begin{itemize}
    \item the analysis type
    \item the base data like the workplace of the measurement
    \item the reasons for the measurement
    \item if the measurement shows expected course or not 
\end{itemize}


\subsection{Adding new devices and open old measurements}
This section describes the process of opening old measurements, adding new devices and display both on the data screen. 

In image \ref{fig:imgopen1} and \ref{fig:imgopen2} the GUI-look can be found. 

Opening and Adding: 
- in the window with found devices should be a plus button 
- when pressing the plus button a window should open 
- in this window the user should see the devices that could be connected to the Software and a input field for a storage path
- the user should be able to input a file into the input field via drag and drop
- next to the devices and the storage path should be plus buttons
- if the user presses the plus button next to the device the plus button turns into a green checkmarkbox and the device is added to the list of connected devices, if pressing again the checkmarkbox turns into the plus button and the device is removed from the list of connected devices but is still represented in the window 
- if the user presses the plus button next to the storage path the cvs file is added to the found devices, this should be a way to display old data as a waveform in the datawindow  
- after the plus button was pressed the button turns into a checkmarkbox and underneath another plus button with an input field is added; so the user is able to use more than one cvs file 
- After adding all paths and devices the user can press a button to save the settings and window is closed
- the names of the devices and paths are now visible in the found Devices window, next to them are checkmarkboxes 
- when clicking a checkmarkbox next to the paths the data is displayed or deleted in the data window, by default they are enabled
- the checkmarkbox next to the devices will pop up after the measurement and the user is able to enable/disable the visibility of the data in the datawindow with those


\begin{figure}
    \includegraphics[width=.9\textwidth]{./assets/pictures/Open1.png}
    \caption[]{Overview of the GUI for adding new devices and open old measurements; part 1}
    \label{fig:imgopen1}
\end{figure}

\begin{figure}
    \includegraphics[width=.9\textwidth]{./assets/pictures/Open2.png}
    \caption[]{Overview of the GUI for adding new devices and open old measurements; part 2}
    \label{fig:imgopen2}
\end{figure}


\subsection{Help menu}

The Helpmenu should contain 
\begin{itemize}
    \item a link to our ous
    \item a link to an Tutorial website
\end{itemize}




\input{waveformprocessingnetwork.tex}
\input{furtherDevl.tex}

\printglossaries

\end{document}